<!DOCTYPE html>
<html>
<head>
	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		window.onload = function(){
			var room = prompt('방이름을 입력하세요.');
			var socket = io.connect();	
			
			socket.emit('join', room);
			socket.on('message', function(data){
				var output = '';
				output += '<li>';
				output += '    <h3>' + data.name + '</h3>';
				output += '    <p>' + data.message + '</p>';
				output += '    <p>' + data.date + '</p>';
				output += '</li>';
				$(output).prependTo('#content');
				//$('<p>' + data + '</p>').appendTo('body');
			});
			document.getElementById('button').onclick = function(){
				//var text = document.getElementById('text').value;
				//socket.emit('rint', text);
				socket.emit('message', {
					name : $('#id').val(),
					message: $('#message').val(),
					date : new Date().toUTCString()
				});
			};
		};
	</script>
</head>
<body>
	<input type="text" id="id" value="">
	<input type="text" id="message" value="">
	<input type="button" id="button" value="보내기">
	<ul id="content">
	</ul>
</body>
</html>